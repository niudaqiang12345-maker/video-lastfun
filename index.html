<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>çŸ­è§†é¢‘å¹³å° - å…¨å±æ²‰æµ¸ä½“éªŒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@latest/dist/full.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* å…¨å±€é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            touch-action: pan-y;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #000;
        }

        /* å…¨å±è§†é¢‘å®¹å™¨ */
        .player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .player-container.hidden {
            display: none;
        }

        /* è§†é¢‘åŒ…è£…å™¨ */
        .video-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .video-element {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: #000;
        }

        /* è§†é¢‘åˆ‡æ¢è¿‡æ¸¡ */
        .video-transition {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .video-transition.active {
            opacity: 1;
        }

        /* å³ä¾§ä¿¡æ¯æ  */
        .side-info {
            position: absolute;
            right: 0;
            bottom: 120px;
            width: 280px;
            max-height: 60%;
            padding: 16px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            pointer-events: none;
            z-index: 1010;
        }

        .side-info > * {
            pointer-events: auto;
        }

        .video-title {
            font-size: 1.125rem;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .video-stats {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 0.813rem;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .video-stats span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* ç”¨æˆ·ä¿¡æ¯ */
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255,255,255,0.3);
            flex-shrink: 0;
        }

        .user-avatar i {
            color: white;
            font-size: 20px;
        }

        .user-details {
            flex: 1;
            min-width: 0;
        }

        .user-name {
            font-weight: 600;
            color: white;
            font-size: 0.938rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-id {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.7);
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .follow-btn {
            background: linear-gradient(90deg, #fe2c55 0%, #ff5c7c 100%);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .follow-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(254, 44, 85, 0.4);
        }

        .follow-btn.following {
            background: rgba(255,255,255,0.2);
        }

        /* æ ‡ç­¾ */
        .video-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .video-tags .tag {
            background: rgba(255,255,255,0.15);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.75rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .video-tags .tag:hover {
            background: rgba(255,255,255,0.25);
        }

        /* éŸ³ä¹ä¿¡æ¯ */
        .music-info {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.1);
            padding: 10px 14px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-bottom: 16px;
        }

        .music-info i {
            color: white;
            font-size: 14px;
        }

        .music-info span {
            color: white;
            font-size: 0.813rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .music-icon {
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* åº•éƒ¨æ§åˆ¶æ  */
        .bottom-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px 16px 28px;
            background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 100%);
            z-index: 1010;
        }

        .bottom-controls-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .control-btn {
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            transform: scale(1.1);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .control-btn.main {
            width: 56px;
            height: 56px;
            font-size: 24px;
        }

        .control-btn.secondary {
            width: 44px;
            height: 44px;
            font-size: 22px;
        }

        .control-btn .badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #fe2c55;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        .control-btn-wrapper {
            position: relative;
        }

        /* è¯„è®ºåŒºåŸŸ */
        .comments-section {
            position: absolute;
            left: 0;
            bottom: 100px;
            width: 320px;
            max-height: 45%;
            padding: 16px;
            overflow-y: auto;
            pointer-events: none;
            z-index: 1010;
        }

        .comments-section > * {
            pointer-events: auto;
        }

        .comments-header {
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
            font-size: 0.938rem;
            font-weight: 600;
            margin-bottom: 16px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .comment-count {
            font-weight: 400;
            opacity: 0.7;
            font-size: 0.813rem;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .comment-item {
            animation: slideIn 0.4s ease-out;
            opacity: 0;
            transform: translateX(-20px);
        }

        .comment-item.visible {
            opacity: 1;
            transform: translateX(0);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 6px;
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .comment-avatar span {
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .comment-meta {
            flex: 1;
            min-width: 0;
        }

        .comment-username {
            font-weight: 600;
            color: white;
            font-size: 0.813rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .comment-time {
            font-size: 0.688rem;
            color: rgba(255,255,255,0.6);
        }

        .comment-content {
            padding-left: 42px;
            color: rgba(255,255,255,0.95);
            font-size: 0.875rem;
            line-height: 1.5;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            word-wrap: break-word;
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        .comments-section::-webkit-scrollbar {
            width: 4px;
        }

        .comments-section::-webkit-scrollbar-track {
            background: transparent;
        }

        .comments-section::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }

        /* æ’­æ”¾çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .play-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: rgba(255,255,255,0.25);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1020;
        }

        .play-indicator.visible {
            opacity: 1;
        }

        .play-indicator i {
            color: white;
            font-size: 32px;
            margin-left: 4px;
        }

        .play-indicator.paused i {
            margin-left: 0;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255,255,255,0.3);
            z-index: 1015;
        }

        .progress-bar .progress {
            height: 100%;
            background: linear-gradient(90deg, #fe2c55 0%, #ff5c7c 100%);
            width: 0%;
            transition: width 0.1s linear;
        }

        /* é¡µé¢åˆ‡æ¢æŒ‰é’® */
        .page-nav-btn {
            position: fixed;
            top: 16px;
            right: 16px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 24px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 1030;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
        }

        .page-nav-btn:hover {
            background: rgba(0,0,0,0.7);
            transform: scale(1.05);
        }

        /* ä¸Šä¼ é¡µé¢ */
        .upload-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #f5f5f5;
            z-index: 2000;
            overflow-y: auto;
            display: none;
        }

        .upload-page.active {
            display: block;
        }

        /* Toast é€šçŸ¥ */
        .toast-container {
            position: fixed;
            top: 80px;
            right: 16px;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 14px 20px;
            border-radius: 12px;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: toastIn 0.3s ease-out, toastOut 0.3s ease-out 2.7s forwards;
            backdrop-filter: blur(10px);
        }

        .toast.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .toast.error {
            background: linear-gradient(135deg, #cb2d3e 0%, #ef473a 100%);
        }

        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes toastOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        /* åº•éƒ¨æç¤º */
        .footer-tip {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 12px;
            background: white;
            color: #666;
            font-size: 0.75rem;
            z-index: 1500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            border-top: 1px solid #eee;
        }

        .footer-tip.hidden {
            display: none;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .side-info {
                width: 260px;
                padding: 12px;
                bottom: 100px;
            }

            .comments-section {
                width: 280px;
                max-height: 40%;
                padding: 12px;
            }

            .video-title {
                font-size: 1rem;
            }

            .user-info {
                margin-bottom: 12px;
            }

            .user-avatar {
                width: 40px;
                height: 40px;
            }

            .control-btn.main {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }

            .control-btn.secondary {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }

            .bottom-controls {
                padding: 16px 12px 24px;
            }

            .control-group {
                gap: 16px;
            }

            .page-nav-btn {
                top: 12px;
                right: 12px;
                padding: 10px 16px;
                font-size: 0.813rem;
            }
        }

        @media (max-width: 480px) {
            .side-info {
                width: 100%;
                padding: 12px;
                bottom: 80px;
            }

            .comments-section {
                width: 100%;
                max-height: 35%;
                padding: 12px;
            }

            .video-title {
                font-size: 0.938rem;
            }

            .video-stats {
                font-size: 0.75rem;
                gap: 12px;
            }

            .control-group {
                gap: 12px;
            }

            .control-btn.main {
                width: 44px;
                height: 44px;
                font-size: 18px;
            }

            .control-btn.secondary {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="bg-black">
    <!-- æ’­æ”¾å™¨å®¹å™¨ -->
    <div class="player-container" id="playerContainer">
        <div class="video-wrapper" id="videoWrapper">
            <!-- å½“å‰è§†é¢‘ -->
            <video class="video-element" id="currentVideo" autoplay muted playsinline></video>
            
            <!-- ä¸‹ä¸€è§†é¢‘ï¼ˆé¢„åŠ è½½ï¼‰ -->
            <video class="video-element video-transition" id="nextVideo"></video>
            
            <!-- æ’­æ”¾çŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <div class="play-indicator" id="playIndicator">
                <i class="fas fa-play"></i>
            </div>
            
            <!-- è¿›åº¦æ¡ -->
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <!-- å³ä¾§ä¿¡æ¯æ  -->
            <div class="side-info">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <p class="user-name" id="userName">åˆ›ä½œè€…åç§°</p>
                        <p class="user-id" id="userId">@creator</p>
                    </div>
                    <button class="follow-btn" id="followBtn">
                        <i class="fas fa-plus mr-1"></i>å…³æ³¨
                    </button>
                </div>
                
                <h2 class="video-title" id="videoTitle">è§†é¢‘æ ‡é¢˜åŠ è½½ä¸­...</h2>
                
                <div class="video-stats">
                    <span><i class="fas fa-eye"></i> <span id="viewCount">0</span></span>
                    <span><i class="fas fa-play-circle"></i> <span id="duration">00:00</span></span>
                </div>
                
                <div class="video-tags" id="videoTags">
                    <!-- æ ‡ç­¾å°†åŠ¨æ€æ·»åŠ  -->
                </div>
                
                <div class="music-info">
                    <i class="fas fa-music music-icon"></i>
                    <span id="musicName">æ­£åœ¨åŠ è½½éŸ³ä¹ä¿¡æ¯...</span>
                </div>
            </div>
            
            <!-- è¯„è®ºåŒºåŸŸ -->
            <div class="comments-section" id="commentsSection">
                <div class="comments-header">
                    <i class="fas fa-comments"></i>
                    è¯„è®º
                    <span class="comment-count" id="commentCount">(0)</span>
                </div>
                <div class="comments-list" id="commentsList">
                    <!-- è¯„è®ºå°†åŠ¨æ€æ·»åŠ  -->
                </div>
            </div>
            
            <!-- åº•éƒ¨æ§åˆ¶æ  -->
            <div class="bottom-controls">
                <div class="bottom-controls-inner">
                    <div class="control-group">
                        <div class="control-btn-wrapper">
                            <button class="control-btn secondary" id="likeBtn">
                                <i class="far fa-heart"></i>
                                <span class="badge" id="likeCount">0</span>
                            </button>
                        </div>
                        <button class="control-btn secondary" id="commentBtn">
                            <i class="far fa-comment-dots"></i>
                        </button>
                        <button class="control-btn secondary" id="shareBtn">
                            <i class="fas fa-share-alt"></i>
                        </button>
                        <button class="control-btn secondary" id="collectBtn">
                            <i class="far fa-bookmark"></i>
                        </button>
                    </div>
                    
                    <div class="control-group">
                        <button class="control-btn secondary" id="prevBtn" title="ä¸Šä¸€ä¸ª">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="control-btn main" id="playPauseBtn" title="æ’­æ”¾/æš‚åœ">
                            <i class="fas fa-pause"></i>
                        </button>
                        <button class="control-btn secondary" id="nextBtn" title="ä¸‹ä¸€ä¸ª">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é¡µé¢åˆ‡æ¢æŒ‰é’® -->
        <button class="page-nav-btn" id="navToUpload">
            <i class="fas fa-cloud-upload-alt"></i>
            ä¸Šä¼ è§†é¢‘
        </button>
    </div>
    
    <!-- ä¸Šä¼ é¡µé¢ -->
    <div class="upload-page" id="uploadPage">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <nav class="navbar bg-white shadow-lg sticky top-0 z-50">
            <div class="container mx-auto px-4">
                <div class="navbar-start">
                    <button class="btn btn-ghost" id="backToPlayer">
                        <i class="fas fa-arrow-left mr-2"></i>
                    </button>
                    <a class="btn btn-ghost text-xl font-bold ml-2">
                        <i class="fas fa-play-circle mr-2 text-primary"></i>
                        è§†é¢‘å¹³å°
                    </a>
                </div>
                <div class="navbar-center">
                    <h1 class="text-xl font-bold">é“¾æ¥ä¸Šä¼ </h1>
                </div>
                <div class="navbar-end">
                    <!-- ç©ºå ä½ -->
                </div>
            </div>
        </nav>
        
        <!-- ä¸»å†…å®¹ -->
        <main class="container mx-auto px-4 py-6 max-w-4xl">
            <!-- æ‰¹é‡é“¾æ¥è¾“å…¥ -->
            <div class="card bg-white shadow-lg mb-6">
                <div class="card-body">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-link mr-2 text-primary"></i>
                        æ‰¹é‡è¾“å…¥è§†é¢‘é“¾æ¥
                    </h3>
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text">æ”¯æŒå¤šä¸ªå¹³å°ï¼ˆæ¯è¡Œä¸€ä¸ªé“¾æ¥ï¼‰</span>
                        </label>
                        <textarea id="linkInput" 
                                  class="textarea textarea-bordered h-40 font-mono text-sm"
                                  placeholder="æ”¯æŒçš„æ ¼å¼ç¤ºä¾‹ï¼š
https://www.youtube.com/watch?v=xxxxxxxx
https://www.bilibili.com/video/BVxxxxxxxx
https://vimeo.com/xxxxxxxx
https://www.twitch.tv/videos/xxxxxxxx"></textarea>
                        <div class="flex flex-wrap justify-between items-center mt-4 gap-4">
                            <div class="flex flex-wrap gap-2">
                                <span class="badge badge-outline gap-1">
                                    <i class="fab fa-youtube text-red-600"></i> YouTube
                                </span>
                                <span class="badge badge-outline gap-1">
                                    <i class="fab fa-bilibili text-pink-500"></i> Bilibili
                                </span>
                                <span class="badge badge-outline gap-1">
                                    <i class="fab fa-vimeo text-blue-500"></i> Vimeo
                                </span>
                                <span class="badge badge-outline gap-1">
                                    <i class="fab fa-twitch text-purple-600"></i> Twitch
                                </span>
                            </div>
                            <div class="flex gap-2">
                                <button class="btn btn-primary" id="parseLinksBtn">
                                    <i class="fas fa-search mr-2"></i>è§£æé“¾æ¥
                                </button>
                                <button class="btn btn-ghost" id="clearLinksBtn">
                                    <i class="fas fa-trash-alt mr-2"></i>æ¸…ç©º
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ä¸Šä¼ é˜Ÿåˆ— -->
            <div class="card bg-white shadow-lg mb-6" id="uploadQueue" style="display: none;">
                <div class="card-body">
                    <div class="flex flex-wrap justify-between items-center mb-4 gap-4">
                        <h3 class="text-lg font-semibold flex items-center">
                            <i class="fas fa-list mr-2 text-primary"></i>
                            ä¸Šä¼ é˜Ÿåˆ—
                            <span class="badge badge-ghost ml-2" id="queueCount">0</span>
                        </h3>
                        <div class="flex gap-2">
                            <button class="btn btn-sm btn-primary" id="uploadAllBtn">
                                <i class="fas fa-upload mr-1"></i>å…¨éƒ¨ä¸Šä¼ 
                            </button>
                            <button class="btn btn-sm btn-ghost" id="clearQueueBtn">
                                <i class="fas fa-trash-alt mr-1"></i>æ¸…ç©º
                            </button>
                        </div>
                    </div>
                    <div class="space-y-3" id="fileList">
                        <!-- é˜Ÿåˆ—é¡¹å°†åŠ¨æ€æ·»åŠ  -->
                    </div>
                </div>
            </div>
            
            <!-- ä¸Šä¼ å†å² -->
            <div class="card bg-white shadow-lg">
                <div class="card-body">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-history mr-2 text-primary"></i>
                        ä¸Šä¼ å†å²
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>æ ‡é¢˜</th>
                                    <th>æ¥æº</th>
                                    <th>çŠ¶æ€</th>
                                    <th>ä¸Šä¼ æ—¶é—´</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody id="uploadHistory">
                                <!-- å†å²è®°å½•å°†åŠ¨æ€æ·»åŠ  -->
                            </tbody>
                        </table>
                    </div>
                    <div id="emptyHistory" class="text-center py-8 text-gray-500">
                        <i class="fas fa-inbox text-4xl mb-3 opacity-50"></i>
                        <p>æš‚æ— ä¸Šä¼ å†å²</p>
                    </div>
                </div>
            </div>
        </main>
        
    
    </div>
    
    <!-- Toast é€šçŸ¥å®¹å™¨ -->
    <div class="toast-container" id="toastContainer"></div>
    

    <script>
        // ==================== æ•°æ®å®šä¹‰ ====================
        const initialVideos = [
            {
                id: 1,
                title: "ğŸ”ï¸ å£®ç¾å±±å²³å»¶æ—¶æ‘„å½± | æ„Ÿå—å¤§è‡ªç„¶çš„éœ‡æ’¼ä¹‹ç¾",
                description: "ç©¿è¶Šå››å­£ï¼Œè®°å½•å±±å·çš„å£®ä¸½å˜åŒ–",
                src: "https://www.w3schools.com/html/mov_bbb.mp4",
                duration: 25,
                views: 12543,
                likes: 2341,
                comments: [
                    { user: "ç”¨æˆ·1", text: "å¤ªéœ‡æ’¼äº†ï¼ç”»è´¨è¶…æ¸…æ™°", time: "2åˆ†é’Ÿå‰" },
                    { user: "ç”¨æˆ·2", text: "è¿™æ˜¯å“ªä¸ªåœ°æ–¹ï¼Ÿå¤ªç¾äº†", time: "5åˆ†é’Ÿå‰" },
                    { user: "ç”¨æˆ·3", text: "éŸ³ä¹ä¹Ÿå¾ˆæ£’ï¼Œé…åˆå¾—æ°åˆ°å¥½å¤„", time: "8åˆ†é’Ÿå‰" },
                    { user: "ç”¨æˆ·4", text: "æ‰‹æœºå£çº¸æœ‰äº†", time: "12åˆ†é’Ÿå‰" }
                ],
                tags: ["å±±å²³", "å»¶æ—¶æ‘„å½±", "è‡ªç„¶é£å…‰", "çƒ­é—¨"],
                music: "è‡ªç„¶ä¹‹å£° - èˆ’ç¼“é’¢ç´æ›²",
                user: {
                    name: "é£å…‰æ‘„å½±å¸ˆ",
                    id: "nature_photo"
                }
            },
            {
                id: 2,
                title: "ğŸŒƒ åŸå¸‚å¤œæ™¯è½¦æµ | æ„Ÿå—éƒ½å¸‚çš„è„‰åŠ¨ä¸èŠ‚å¥",
                description: "éœ“è™¹ç¯ä¸‹çš„åŸå¸‚æ•…äº‹",
                src: "https://www.w3schools.com/html/movie.mp4",
                duration: 18,
                views: 8921,
                likes: 1876,
                comments: [
                    { user: "åŸå¸‚æ¢ç´¢è€…", text: "å¤œæ™¯æ§è¡¨ç¤ºæåº¦èˆ’é€‚", time: "1åˆ†é’Ÿå‰" },
                    { user: "æ‘„å½±çˆ±å¥½è€…", text: "æ‹æ‘„è§’åº¦å¾ˆç‹¬ç‰¹", time: "3åˆ†é’Ÿå‰" }
                ],
                tags: ["åŸå¸‚", "å¤œæ™¯", "è½¦æµ", "éƒ½å¸‚"],
                music: "åŸå¸‚éœ“è™¹ - ç”µå­éŸ³ä¹",
                user: {
                    name: "éƒ½å¸‚é•œå¤´",
                    id: "urban_lens"
                }
            },
            {
                id: 3,
                title: "ğŸ³ 5åˆ†é’Ÿå¿«æ‰‹æ—©é¤ | è¥å…»ç¾å‘³ä¸€å¤©çš„å¼€å§‹",
                description: "ç®€å•æ˜“å­¦ï¼Œå‘Šåˆ«æ—©é¤çƒ¦æ¼",
                src: "https://www.w3schools.com/html/mov_bbb.mp4",
                duration: 32,
                views: 23456,
                likes: 4567,
                comments: [
                    { user: "ç¾é£Ÿå®¶", text: "æ˜å¤©æ—©ä¸Šå°±è¯•è¯•ï¼", time: "åˆšåˆš" },
                    { user: "å¨è‰ºæ–°æ‰‹", text: "æ­¥éª¤å¾ˆè¯¦ç»†ï¼Œå®¹æ˜“ä¸Šæ‰‹", time: "2åˆ†é’Ÿå‰" },
                    { user: "å¥èº«è¾¾äºº", text: "è›‹ç™½è´¨å«é‡å¾ˆåˆé€‚", time: "6åˆ†é’Ÿå‰" },
                    { user: "ä¸Šç­æ—", text: "å¤ªå®ç”¨äº†ï¼Œæ”¶è—äº†", time: "10åˆ†é’Ÿå‰" },
                    { user: "å¦ˆå¦ˆ", text: "ç»™å­©å­åšæ—©é¤çš„çµæ„Ÿ", time: "15åˆ†é’Ÿå‰" }
                ],
                tags: ["ç¾é£Ÿ", "æ—©é¤", "å¿«æ‰‹èœ", "æ•™ç¨‹"],
                music: "æ¸…æ™¨æ—¶å…‰ - è½»éŸ³ä¹",
                user: {
                    name: "ç¾é£Ÿè¾¾äºº",
                    id: "food_master"
                }
            }
        ];

        // ==================== å…¨å±€å˜é‡ ====================
        let videos = [...initialVideos];
        let currentVideoIndex = 0;
        let isPlaying = true;
        let isLiked = false;
        let isCollected = false;
        let isFollowing = false;
        let uploadLinks = [];
        let uploadHistory = [];
        let isTransitioning = false;

        // ==================== DOM å…ƒç´  ====================
        const playerContainer = document.getElementById('playerContainer');
        const uploadPage = document.getElementById('uploadPage');
        const currentVideo = document.getElementById('currentVideo');
        const nextVideo = document.getElementById('nextVideo');
        const playIndicator = document.getElementById('playIndicator');
        const progressBar = document.getElementById('progressBar');
        
        // ==================== åˆå§‹åŒ– ====================
        function init() {
            // åŠ è½½ç¬¬ä¸€ä¸ªè§†é¢‘
            loadVideo(0);
            
            // ç»‘å®šäº‹ä»¶
            bindPlayerEvents();
            bindUploadEvents();
            
            // åˆå§‹åŒ–è¯„è®º
            updateComments();
            
            // æ˜¾ç¤ºåˆå§‹è§†é¢‘ä¿¡æ¯
            updateVideoInfo();
            
            console.log('ğŸ¬ è§†é¢‘æ’­æ”¾å™¨åˆå§‹åŒ–å®Œæˆï¼Œå…±åŠ è½½ ' + videos.length + ' ä¸ªè§†é¢‘');
        }

        // ==================== è§†é¢‘åŠ è½½ä¸åˆ‡æ¢ ====================
        function loadVideo(index, direction = 'next') {
            if (index < 0 || index >= videos.length || isTransitioning) return;
            if (index === currentVideoIndex && !direction) return;
            
            isTransitioning = true;
            
            // åœæ­¢å½“å‰è§†é¢‘
            currentVideo.pause();
            
            // æ›´æ–°ç´¢å¼•
            const oldIndex = currentVideoIndex;
            currentVideoIndex = index;
            
            const videoData = videos[index];
            
            // è®¾ç½®å½“å‰è§†é¢‘
            currentVideo.src = videoData.src;
            currentVideo.load();
            
            // é¢„åŠ è½½ä¸‹ä¸€è§†é¢‘
            preloadNextVideo(index);
            
            // æ’­æ”¾è§†é¢‘
            currentVideo.play().then(() => {
                isTransitioning = false;
                isPlaying = true;
                updatePlayButton();
                
                // æ›´æ–°æ’­æ”¾æ¬¡æ•°
                videoData.views++;
                document.getElementById('viewCount').textContent = formatNumber(videoData.views);
            }).catch(e => {
                console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢:', e);
                isPlaying = false;
                isTransitioning = false;
                updatePlayButton();
            });
            
            // æ›´æ–°ç•Œé¢
            updateVideoInfo();
            updateComments();
            
            console.log(`ğŸ“½ï¸ åˆ‡æ¢åˆ°è§†é¢‘ ${index + 1}: ${videoData.title.substring(0, 30)}...`);
        }

        function preloadNextVideo(currentIndex) {
            const nextIndex = (currentIndex + 1) % videos.length;
            const nextVideoData = videos[nextIndex];
            
            nextVideo.src = nextVideoData.src;
            nextVideo.load();
            nextVideo.classList.add('active');
            
            setTimeout(() => {
                nextVideo.classList.remove('active');
            }, 400);
        }

        function switchVideo(direction) {
            let newIndex;
            
            if (direction === 'next') {
                newIndex = (currentVideoIndex + 1) % videos.length;
            } else {
                newIndex = (currentVideoIndex - 1 + videos.length) % videos.length;
            }
            
            loadVideo(newIndex, direction);
        }

        // ==================== è§†é¢‘ä¿¡æ¯æ›´æ–° ====================
        function updateVideoInfo() {
            const videoData = videos[currentVideoIndex];
            
            // æ ‡é¢˜å’Œç»Ÿè®¡
            document.getElementById('videoTitle').textContent = videoData.title;
            document.getElementById('viewCount').textContent = formatNumber(videoData.views);
            document.getElementById('duration').textContent = formatTime(videoData.duration);
            
            // ç”¨æˆ·ä¿¡æ¯
            document.getElementById('userName').textContent = videoData.user.name;
            document.getElementById('userId').textContent = '@' + videoData.user.id;
            
            // éŸ³ä¹ä¿¡æ¯
            document.getElementById('musicName').textContent = 'â™ª ' + videoData.music;
            
            // æ ‡ç­¾
            const tagsContainer = document.getElementById('videoTags');
            tagsContainer.innerHTML = '';
            videoData.tags.forEach(tag => {
                const tagEl = document.createElement('span');
                tagEl.className = 'tag';
                tagEl.textContent = '#' + tag;
                tagsContainer.appendChild(tagEl);
            });
            
            // ç‚¹èµæ•°
            document.getElementById('likeCount').textContent = formatNumber(videoData.likes);
            
            // è¯„è®ºæ•°
            document.getElementById('commentCount').textContent = `(${videoData.comments.length})`;
        }

        // ==================== è¯„è®ºç³»ç»Ÿ ====================
        function updateComments() {
            const videoData = videos[currentVideoIndex];
            const commentsList = document.getElementById('commentsList');
            
            // æ¸…ç©ºç°æœ‰è¯„è®ºï¼ˆæ·¡å‡ºï¼‰
            commentsList.innerHTML = '';
            
            // é‡æ–°æ·»åŠ è¯„è®ºï¼ˆå¸¦åŠ¨ç”»ï¼‰
            videoData.comments.forEach((comment, index) => {
                const commentEl = document.createElement('div');
                commentEl.className = 'comment-item';
                commentEl.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-avatar">
                            <span>${comment.user.charAt(0).toUpperCase()}</span>
                        </div>
                        <div class="comment-meta">
                            <p class="comment-username">${comment.user}</p>
                            <p class="comment-time">${comment.time}</p>
                        </div>
                    </div>
                    <p class="comment-content">${comment.text}</p>
                `;
                
                commentsList.appendChild(commentEl);
                
                // å»¶è¿Ÿæ˜¾ç¤ºåŠ¨ç”»
                setTimeout(() => {
                    commentEl.classList.add('visible');
                }, index * 100);
            });
            
            // è¯„è®ºæ•°
            document.getElementById('commentCount').textContent = `(${videoData.comments.length})`;
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            document.getElementById('commentsSection').scrollTop = 0;
        }

        // ==================== æ’­æ”¾æ§åˆ¶ ====================
        function togglePlay() {
            if (currentVideo.paused) {
                currentVideo.play();
                isPlaying = true;
            } else {
                currentVideo.pause();
                isPlaying = false;
            }
            updatePlayButton();
        }

        function updatePlayButton() {
            const playPauseBtn = document.getElementById('playPauseBtn');
            const indicatorIcon = playIndicator.querySelector('i');
            
            if (isPlaying) {
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                indicatorIcon.className = 'fas fa-play';
                indicatorIcon.style.marginLeft = '4px';
                playIndicator.classList.remove('paused');
            } else {
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                indicatorIcon.className = 'fas fa-pause';
                indicatorIcon.style.marginLeft = '0';
                playIndicator.classList.add('paused');
            }
            
            playIndicator.classList.toggle('visible', !isPlaying);
        }

        function toggleLike() {
            const likeBtn = document.getElementById('likeBtn');
            const icon = likeBtn.querySelector('i');
            const videoData = videos[currentVideoIndex];
            
            isLiked = !isLiked;
            
            if (isLiked) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-red-500');
                videoData.likes++;
                showToast('å·²ç‚¹èµ', 'success');
            } else {
                icon.classList.remove('fas', 'text-red-500');
                icon.classList.add('far');
                videoData.likes--;
            }
            
            document.getElementById('likeCount').textContent = formatNumber(videoData.likes);
        }

        function toggleCollect() {
            const collectBtn = document.getElementById('collectBtn');
            const icon = collectBtn.querySelector('i');
            
            isCollected = !isCollected;
            
            if (isCollected) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-yellow-500');
                showToast('å·²æ”¶è—', 'success');
            } else {
                icon.classList.remove('fas', 'text-yellow-500');
                icon.classList.add('far');
            }
        }

        function toggleFollow() {
            const followBtn = document.getElementById('followBtn');
            
            isFollowing = !isFollowing;
            
            if (isFollowing) {
                followBtn.innerHTML = '<i class="fas fa-check mr-1"></i>å·²å…³æ³¨';
                followBtn.classList.add('following');
                showToast('å·²å…³æ³¨', 'success');
            } else {
                followBtn.innerHTML = '<i class="fas fa-plus mr-1"></i>å…³æ³¨';
                followBtn.classList.remove('following');
            }
        }

        // ==================== äº‹ä»¶ç»‘å®š ====================
        function bindPlayerEvents() {
            // æ’­æ”¾/æš‚åœæŒ‰é’®
            document.getElementById('playPauseBtn').addEventListener('click', togglePlay);
            
            // ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªæŒ‰é’®
            document.getElementById('prevBtn').addEventListener('click', () => switchVideo('prev'));
            document.getElementById('nextBtn').addEventListener('click', () => switchVideo('next'));
            
            // ç‚¹èµã€æ”¶è—ã€å…³æ³¨æŒ‰é’®
            document.getElementById('likeBtn').addEventListener('click', toggleLike);
            document.getElementById('collectBtn').addEventListener('click', toggleCollect);
            document.getElementById('followBtn').addEventListener('click', toggleFollow);
            
            // åˆ†äº«æŒ‰é’®
            document.getElementById('shareBtn').addEventListener('click', () => {
                const videoData = videos[currentVideoIndex];
                navigator.clipboard.writeText(videoData.title).then(() => {
                    showToast('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
                });
            });
            
            // è¯„è®ºæŒ‰é’®ï¼ˆæ»šåŠ¨åˆ°è¯„è®ºï¼‰
            document.getElementById('commentBtn').addEventListener('click', () => {
                document.getElementById('commentsSection').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'center'
                });
            });
            
            // è§†é¢‘æ’­æ”¾äº‹ä»¶
            currentVideo.addEventListener('ended', () => {
                switchVideo('next');
            });
            
            currentVideo.addEventListener('timeupdate', () => {
                const progress = (currentVideo.currentTime / currentVideo.duration) * 100;
                progressBar.style.width = progress + '%';
            });
            
            // è§¦æ‘¸æ»‘åŠ¨åˆ‡æ¢è§†é¢‘ï¼ˆç®€åŒ–ç‰ˆï¼‰
            let touchStartY = 0;
            let touchEndY = 0;
            
            document.getElementById('videoWrapper').addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });
            
            document.getElementById('videoWrapper').addEventListener('touchend', (e) => {
                touchEndY = e.changedTouches[0].clientY;
                handleSwipe();
            }, { passive: true });
            
            function handleSwipe() {
                const swipeDistance = touchStartY - touchEndY;
                const minSwipeDistance = 50;
                
                if (Math.abs(swipeDistance) > minSwipeDistance) {
                    if (swipeDistance > 0) {
                        switchVideo('next');
                    } else {
                        switchVideo('prev');
                    }
                }
            }
            
            // ç‚¹å‡»è§†é¢‘åˆ‡æ¢æ’­æ”¾çŠ¶æ€
            currentVideo.addEventListener('click', togglePlay);
            
            // é¡µé¢åˆ‡æ¢æŒ‰é’®
            document.getElementById('navToUpload').addEventListener('click', showUploadPage);
            document.getElementById('backToPlayer').addEventListener('click', showPlayerPage);
            
            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    switchVideo('prev');
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    switchVideo('next');
                } else if (e.key === ' ') {
                    e.preventDefault();
                    togglePlay();
                }
            });
        }

        // ==================== ä¸Šä¼ åŠŸèƒ½ ====================
        const linkPatterns = {
            youtube: /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,
            bilibili: /(?:bilibili\.com\/video\/|b23\.tv\/)([^&\n?#]+)/,
            vimeo: /vimeo\.com\/(\d+)/,
            twitch: /twitch\.tv\/videos\/(\d+)/
        };

        function bindUploadEvents() {
            // è§£æé“¾æ¥
            document.getElementById('parseLinksBtn').addEventListener('click', parseLinks);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('clearLinksBtn').addEventListener('click', () => {
                document.getElementById('linkInput').value = '';
            });
            
            // å…¨éƒ¨ä¸Šä¼ 
            document.getElementById('uploadAllBtn').addEventListener('click', () => {
                uploadLinks.filter(l => l.status === 'pending').forEach(l => uploadLink(l.id));
            });
            
            // æ¸…ç©ºé˜Ÿåˆ—
            document.getElementById('clearQueueBtn').addEventListener('click', () => {
                uploadLinks = [];
                renderUploadQueue();
            });
        }

        function parseLinks() {
            const linkText = document.getElementById('linkInput').value.trim();
            
            if (!linkText) {
                showToast('è¯·è¾“å…¥è§†é¢‘é“¾æ¥', 'error');
                return;
            }
            
            const links = linkText.split('\n').filter(link => link.trim());
            const validLinks = [];
            const invalidLinks = [];
            
            links.forEach(link => {
                link = link.trim();
                let matched = false;
                
                for (const [platform, pattern] of Object.entries(linkPatterns)) {
                    const match = link.match(pattern);
                    if (match) {
                        validLinks.push({
                            id: Date.now() + Math.random(),
                            url: link,
                            platform: platform,
                            videoId: match[1],
                            title: `æ¥è‡ª${getPlatformName(platform)}çš„è§†é¢‘`,
                            status: 'pending',
                            progress: 0
                        });
                        matched = true;
                        break;
                    }
                }
                
                if (!matched) {
                    invalidLinks.push(link);
                }
            });
            
            if (validLinks.length > 0) {
                uploadLinks = uploadLinks.concat(validLinks);
                renderUploadQueue();
                showToast(`æˆåŠŸè§£æ ${validLinks.length} ä¸ªè§†é¢‘é“¾æ¥`, 'success');
            }
            
            if (invalidLinks.length > 0) {
                showToast(`æ— æ³•è¯†åˆ« ${invalidLinks.length} ä¸ªé“¾æ¥`, 'error');
            }
            
            document.getElementById('linkInput').value = '';
        }

        function renderUploadQueue() {
            const fileList = document.getElementById('fileList');
            const queueContainer = document.getElementById('uploadQueue');
            
            if (uploadLinks.length > 0) {
                queueContainer.style.display = 'block';
            } else {
                queueContainer.style.display = 'none';
            }
            
            document.getElementById('queueCount').textContent = uploadLinks.length;
            
            fileList.innerHTML = '';
            
            uploadLinks.forEach(link => {
                const fileItem = document.createElement('div');
                fileItem.className = 'card bg-base-200';
                fileItem.id = `link-${link.id}`;
                fileItem.innerHTML = `
                    <div class="card-body py-3">
                        <div class="flex items-center justify-between">
                            <div class="flex-1 min-w-0">
                                <h4 class="font-semibold truncate">${link.title}</h4>
                                <p class="text-sm text-gray-500 truncate flex items-center gap-1">
                                    <i class="fab fa-${link.platform}"></i>
                                    ${link.url}
                                </p>
                                <div class="mt-2">
                                    <progress class="progress progress-primary w-full" value="${link.progress}" max="100"></progress>
                                    <p class="text-xs text-gray-500 mt-1">
                                        ${link.status === 'uploading' ? 'æ­£åœ¨è·å–è§†é¢‘ä¿¡æ¯...' : 
                                          link.status === 'completed' ? 'å·²æ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨' : 
                                          link.status === 'error' ? 'è·å–å¤±è´¥' : 'ç­‰å¾…å¤„ç†'}
                                    </p>
                                </div>
                            </div>
                            <div class="flex gap-2 ml-4 flex-shrink-0">
                                <button class="btn btn-sm btn-primary" onclick="uploadLink(${link.id})" 
                                        ${link.status === 'completed' ? 'disabled' : ''}>
                                    <i class="fas fa-upload"></i>
                                </button>
                                <button class="btn btn-sm btn-ghost text-error" onclick="removeLink(${link.id})">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                fileList.appendChild(fileItem);
            });
        }

        function uploadLink(linkId) {
            const link = uploadLinks.find(l => l.id === linkId);
            if (!link || link.status !== 'pending') return;
            
            link.status = 'uploading';
            renderUploadQueue();
            
            // æ¨¡æ‹Ÿè·å–è§†é¢‘ä¿¡æ¯
            setTimeout(() => {
                const newVideo = {
                    id: videos.length + 1,
                    title: link.title,
                    description: `æ¥è‡ª${getPlatformName(link.platform)}çš„è§†é¢‘é“¾æ¥`,
                    src: link.url,
                    duration: 30,
                    views: 0,
                    likes: 0,
                    comments: [],
                    tags: [getPlatformName(link.platform)],
                    music: 'æœªçŸ¥éŸ³ä¹',
                    user: {
                        name: link.title.split(' ')[0] || 'æœªçŸ¥ç”¨æˆ·',
                        id: 'link_user'
                    }
                };
                
                videos.push(newVideo);
                link.status = 'completed';
                link.videoId = newVideo.id;
                link.progress = 100;
                
                renderUploadQueue();
                renderUploadHistory();
                
                showToast('è§†é¢‘å·²æ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨', 'success');
                console.log(`âœ… æ·»åŠ æ–°è§†é¢‘: ${link.title}`);
            }, 2000);
        }

        function removeLink(linkId) {
            uploadLinks = uploadLinks.filter(l => l.id !== linkId);
            const linkItem = document.getElementById(`link-${linkId}`);
            if (linkItem) {
                linkItem.remove();
            }
            renderUploadQueue();
        }

        function renderUploadHistory() {
            const tbody = document.getElementById('uploadHistory');
            const emptyState = document.getElementById('emptyHistory');
            
            if (uploadHistory.length === 0) {
                emptyState.style.display = 'block';
                tbody.innerHTML = '';
                return;
            }
            
            emptyState.style.display = 'none';
            
            tbody.innerHTML = '';
            
            uploadHistory.forEach(item => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <div class="flex items-center gap-3">
                            <div class="avatar">
                                <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center">
                                    <i class="fab fa-${item.platform} text-white"></i>
                                </div>
                            </div>
                            <div>
                                <div class="font-bold">${item.title}</div>
                                <div class="text-sm opacity-50 truncate max-w-[200px]">${item.url}</div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="badge badge-outline gap-1">
                            <i class="fab fa-${item.platform}"></i> ${getPlatformName(item.platform)}
                        </span>
                    </td>
                    <td>
                        <span class="badge ${item.status === 'completed' ? 'badge-success' : 'badge-warning'}">
                            ${item.status === 'completed' ? 'æˆåŠŸ' : 'å¤„ç†ä¸­'}
                        </span>
                    </td>
                    <td class="text-sm">${item.addedTime}</td>
                    <td>
                        <button class="btn btn-sm btn-ghost" onclick="playVideoFromHistory(${item.videoId})">
                            <i class="fas fa-play"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function playVideoFromHistory(videoId) {
            const videoIndex = videos.findIndex(v => v.id === videoId);
            if (videoIndex !== -1) {
                loadVideo(videoIndex);
                showPlayerPage();
            }
        }

        // ==================== é¡µé¢åˆ‡æ¢ ====================
        function showUploadPage() {
            playerContainer.classList.add('hidden');
            uploadPage.classList.add('active');
            document.getElementById('playerFooterTip').classList.add('hidden');
            
            currentVideo.pause();
        }

        function showPlayerPage() {
            uploadPage.classList.remove('active');
            playerContainer.classList.remove('hidden');
            document.getElementById('playerFooterTip').classList.remove('hidden');
            
            if (!isPlaying) {
                currentVideo.play();
                isPlaying = true;
                updatePlayButton();
            }
        }

        // ==================== å·¥å…·å‡½æ•° ====================
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function formatNumber(num) {
            if (num >= 10000) {
                return (num / 10000).toFixed(1) + 'w';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'k';
            }
            return num.toString();
        }

        function getPlatformName(platform) {
            const names = {
                youtube: 'YouTube',
                bilibili: 'Bilibili',
                vimeo: 'Vimeo',
                twitch: 'Twitch'
            };
            return names[platform] || platform;
        }

        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                info: 'info-circle'
            };
            
            toast.innerHTML = `
                <i class="fas fa-${icons[type]}"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(toast);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                toast.style.animation = 'toastOut 0.3s ease-out forwards';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ==================== å¯åŠ¨åº”ç”¨ ====================
        init();
        
        // å¤„ç†éŸ³é¢‘ä¸Šä¸‹æ–‡ï¼ˆæµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥ï¼‰
        document.addEventListener('click', () => {
            if (currentVideo.muted) {
                // é¦–æ¬¡ç‚¹å‡»æ—¶å°è¯•å–æ¶ˆé™éŸ³
                currentVideo.muted = false;
            }
        }, { once: true });

        console.log('ğŸ‰ çŸ­è§†é¢‘å¹³å°å·²å¯åŠ¨');
        console.log('ğŸ“± æ”¯æŒçš„æ‰‹åŠ¿æ“ä½œï¼šä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢è§†é¢‘');
        console.log('âŒ¨ï¸ æ”¯æŒçš„é”®ç›˜æ“ä½œï¼šç©ºæ ¼é”®æš‚åœ/æ’­æ”¾ï¼Œä¸Šä¸‹ç®­å¤´åˆ‡æ¢è§†é¢‘');
    </script>
</body>
</html>
